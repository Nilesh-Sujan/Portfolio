<body>
  <div id="player"></div>

  <script>
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '300',
        width: '500',
        videoId: '<%= @video['id'] %>',
        playerVars: {
          'playsinline': 1
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerReady(event) {
      event.target.playVideo();
    }

    var done = false;
    function onPlayerStateChange(event) {
      if (event.data == YT.PlayerState.PLAYING && !done) {
        setTimeout(stopVideo, 6000);
        done = true;
      }
    }
    function stopVideo() {
      player.stopVideo();
    }
  </script>
  <div class="container">
    <div class="row mt-5">
      <div class="col-lg-6">
        <h4>Video search</h4>
        <dl>
          <dt>What was searched?</dt>
          <dd><%= @videos['correctedQuery'] %></dd>
        </dl>
      </div>
      <div class="col-lg-6">
        <h4>Video Info</h4>
        <dl>
          <dd><%= @video['title'] %></dd>
          <dd><%= @video['id'] %></dd>
        </dl>
      </div>
    </div>
  </div>
</body>
